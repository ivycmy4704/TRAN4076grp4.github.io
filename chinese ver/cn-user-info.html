<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>我的品牌資訊 - ProGen AI</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .info-section {
      margin-bottom: 2rem;
      padding: 1.5rem;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: #f9f9f9;
    }
    .info-group {
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid #eee;
    }
    .info-label {
      font-weight: 600;
      color: #333;
      margin-bottom: 0.25rem;
    }
    .info-value {
      color: #666;
      line-height: 1.5;
    }
    .info-value.empty {
      color: #999;
      font-style: italic;
    }
    .product-card {
      background: white;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .button-group {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-top: 2rem;
    }
    .payment-methods {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    .payment-tag {
      background: #007bff;
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.875rem;
    }
    .alert {
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
    }
    .btn-success {
      background: #28a745;
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
    .btn-success:hover {
      background: #218838;
    }
    .hidden {
      display: none !important;
    }
  </style>
</head>
<body class="bg-pastel">
  <nav class="navbar">
    <div class="logo">ProGen AI</div>
    <div>
      <a href="cn-dashboard.html">儀表板</a> |
      <a href="cn-support.html">支援</a> |
      <a href="#" onclick="logout()">登出</a>
    </div>
  </nav>

  <div class="container">
    <div class="card">
      <h1>我的品牌資訊</h1>
      <p class="subtitle">查看和管理您的品牌詳細資訊</p>
      
      <div id="loadingMessage" class="alert">
        正在載入品牌資訊...
      </div>

      <div id="brandInfo" style="display: none;">
        <!-- 基本品牌資訊 -->
        <div class="info-section">
          <h2>基本品牌資訊</h2>
          
          <div class="info-group">
            <div class="info-label">品牌名稱</div>
            <div id="info-brandName" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">地址</div>
            <div id="info-address" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">電話號碼</div>
            <div id="info-phone" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">營業時間</div>
            <div id="info-openingHours" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">假日營業時間</div>
            <div id="info-holidayHours" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">需要提前預約</div>
            <div id="info-advanceBooking" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">付款方式</div>
            <div id="info-paymentMethods" class="payment-methods"></div>
          </div>
        </div>

        <!-- 品牌詳細資訊 -->
        <div class="info-section">
          <h2>品牌詳細資訊</h2>
          
          <div class="info-group">
            <div class="info-label">公司簡介</div>
            <div id="info-companyProfile" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">分店資訊</div>
            <div id="info-branches" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">獎項與認證</div>
            <div id="info-awards" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">產品類別</div>
            <div id="info-productCategories" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">主要推廣類別</div>
            <div id="info-keyPromotedCategories" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">品牌優勢</div>
            <div id="info-brandAdvantages" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">目標客群</div>
            <div id="info-targetAudience" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">消費門檻</div>
            <div id="info-consumptionThreshold" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">文案主題</div>
            <div id="info-copywritingTheme" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">適合的形容詞</div>
            <div id="info-suitableAdjectives" class="info-value"></div>
          </div>
          
          <div class="info-group">
            <div class="info-label">其他備註</div>
            <div id="info-otherNotes" class="info-value"></div>
          </div>
        </div>

        <!-- 產品資訊 -->
        <div class="info-section">
          <h2>產品資訊</h2>
          <div id="info-products"></div>
        </div>

        <div class="button-group">
          <button class="btn-primary" onclick="editQuestionnaire()">編輯資訊</button>
          <button class="btn-secondary" onclick="goToDashboard()">返回儀表板</button>
        </div>
      </div>

      <div id="noDataMessage" class="alert" style="display: none;">
        <h3 style="margin-top: 0;">未找到品牌資訊</h3>
        <p>您尚未填寫品牌問卷。</p>
        <div class="button-group">
          <button class="btn-primary" onclick="goToQuestionnaire()">填寫問卷</button>
          <button class="btn-secondary" onclick="goToDashboard()">返回儀表板</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      loadBrandInformation();
    });

    function loadBrandInformation() {
      try {
        const savedData = localStorage.getItem('questionnaireData');
        const loadingMessage = document.getElementById('loadingMessage');
        const brandInfo = document.getElementById('brandInfo');
        const noDataMessage = document.getElementById('noDataMessage');

        if (savedData) {
          const data = JSON.parse(savedData);
          displayBrandInformation(data);
          loadingMessage.style.display = 'none';
          brandInfo.style.display = 'block';
        } else {
          loadingMessage.style.display = 'none';
          noDataMessage.style.display = 'block';
        }
      } catch (error) {
        console.error('載入品牌資訊時發生錯誤:', error);
        document.getElementById('loadingMessage').style.display = 'none';
        document.getElementById('noDataMessage').style.display = 'block';
      }
    }

    function displayBrandInformation(data) {
      // 基本品牌資訊
      setInfoValue('info-brandName', data.brandName);
      setInfoValue('info-address', data.address);
      setInfoValue('info-phone', data.phone);
      setInfoValue('info-openingHours', data.openingHours);
      setInfoValue('info-holidayHours', data.holidayHours);
      setInfoValue('info-advanceBooking', data.advanceBooking);

      // 付款方式
      const paymentMethodsContainer = document.getElementById('info-paymentMethods');
      if (data.paymentMethods && data.paymentMethods.length > 0) {
        paymentMethodsContainer.innerHTML = data.paymentMethods.map(method => 
          `<span class="payment-tag">${method}</span>`
        ).join('');
      } else {
        paymentMethodsContainer.innerHTML = '<span class="info-value empty">未指定</span>';
      }

      // 品牌詳細資訊
      setInfoValue('info-companyProfile', data.companyProfile);
      setInfoValue('info-branches', data.branches);
      setInfoValue('info-awards', data.awards);
      setInfoValue('info-productCategories', data.productCategories);
      setInfoValue('info-keyPromotedCategories', data.keyPromotedCategories);
      setInfoValue('info-brandAdvantages', data.brandAdvantages);
      setInfoValue('info-targetAudience', data.targetAudience);
      setInfoValue('info-consumptionThreshold', data.consumptionThreshold);
      setInfoValue('info-copywritingTheme', data.copywritingTheme);
      setInfoValue('info-suitableAdjectives', data.suitableAdjectives);
      setInfoValue('info-otherNotes', data.otherNotes);

      // 產品
      displayProducts(data.products);
    }

    function setInfoValue(elementId, value) {
      const element = document.getElementById(elementId);
      if (value && value.toString().trim() !== '') {
        element.textContent = value;
        element.classList.remove('empty');
      } else {
        element.textContent = '未指定';
        element.classList.add('empty');
      }
    }

    function displayProducts(products) {
      const container = document.getElementById('info-products');
      
      if (!products || products.length === 0) {
        container.innerHTML = '<p class="info-value empty">未指定產品</p>';
        return;
      }

      container.innerHTML = products.map((product, index) => `
        <div class="product-card">
          <h3 style="color: #007bff; margin-top: 0;">${product.productName || '未命名產品'}</h3>
          
          <div class="info-group">
            <div class="info-label">類別</div>
            <div class="info-value">${product.productCategory || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">特色</div>
            <div class="info-value">${product.productFeatures || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">解決的問題</div>
            <div class="info-value">${product.problemsSolved || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">優勢</div>
            <div class="info-value">${product.advantages || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">價格</div>
            <div class="info-value">${product.price || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">折扣</div>
            <div class="info-value">${product.discount || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">適合的形容詞</div>
            <div class="info-value">${product.productAdjectives || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">不適合人群</div>
            <div class="info-value">${product.unsuitableCrowd || '未指定'}</div>
          </div>
          
          <div class="info-group">
            <div class="info-label">備註</div>
            <div class="info-value">${product.productNotes || '未指定'}</div>
          </div>
        </div>
      `).join('');
    }

    function editQuestionnaire() {
      window.location.href = 'cn-questionnaire.html';
    }

    function goToQuestionnaire() {
      window.location.href = 'cn-questionnaire.html';
    }

    function goToDashboard() {
      window.location.href = 'cn-dashboard.html';
    }

    function logout() {
      localStorage.removeItem('currentUser');
      window.location.href = 'cn-index.html';
    }
  </script>
</body>
</html>
